(this.webpackJsonpchatfrontend=this.webpackJsonpchatfrontend||[]).push([[0],{159:function(e,t,n){},166:function(e,t){},168:function(e,t){},178:function(e,t){},180:function(e,t){},207:function(e,t){},209:function(e,t){},210:function(e,t){},215:function(e,t){},217:function(e,t){},223:function(e,t){},225:function(e,t){},244:function(e,t){},256:function(e,t){},259:function(e,t){},270:function(e,t,n){},271:function(e,t,n){},273:function(e,t,n){},299:function(e,t,n){"use strict";n.r(t);var c=n(157),s=n(21),r=(n(159),n(160)),a="uI2ooxtwHeI6q69PS98fx9SWVGbpQohO",o=n(0),i=n.n(o),u=n(58),j=n(1);var l=function(e){var t=e.username,n=e.roomname,i=e.socket,l=Object(o.useState)(""),b=Object(s.a)(l,2),h=b[0],m=b[1],d=Object(o.useState)([]),O=Object(s.a)(d,2),f=O[0],x=O[1],p=Object(u.b)();Object(o.useEffect)((function(){i.on("message",(function(e){var t,n,s,o=function(e,t){return e.startsWith("Welcome")||e.startsWith(t)?e:r.decrypt(a,e)}(e.text,e.username);t=!1,n=o,s=e.text,p(function(e,t,n){return{type:"PROCESS",payload:{encrypt:e,text:t,cypher:n}}}(t,n,s)),console.log(o);var i=f;i.push({userId:e.userId,username:e.username,text:o}),x(Object(c.a)(i))}))}),[i]);var v=function(){if(""!==h){var e=function(e){return r.encrypt(a,e)}(h);i.emit("chat",e),m("")}},g=Object(o.useRef)(null);return Object(o.useEffect)((function(){g.current.scrollIntoView({behavior:"smooth"})}),[f]),console.log(f,"mess"),Object(j.jsxs)("div",{className:"chat",children:[Object(j.jsx)("div",{className:"user-name",children:Object(j.jsxs)("h2",{children:[t," ",Object(j.jsxs)("span",{style:{fontSize:"0.7rem"},children:["in ",n]})]})}),Object(j.jsxs)("div",{className:"chat-message",children:[f.map((function(e){return e.username===t?Object(j.jsxs)("div",{className:"message",children:[Object(j.jsx)("p",{children:e.text}),Object(j.jsx)("span",{children:e.username})]}):Object(j.jsxs)("div",{className:"message mess-right",children:[Object(j.jsxs)("p",{children:[e.text," "]}),Object(j.jsx)("span",{children:e.username})]})})),Object(j.jsx)("div",{ref:g})]}),Object(j.jsxs)("div",{className:"send",children:[Object(j.jsx)("input",{placeholder:"enter your message",value:h,onChange:function(e){return m(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&v()}}),Object(j.jsx)("button",{onClick:v,children:"Send"})]})]})};n(270);var b=function(e){var t=e.socket,n=e.roomname,c=Object(o.useState)([]),r=Object(s.a)(c,2),a=r[0],i=r[1];return Object(o.useEffect)((function(){t.emit("updateusers"),t.on("userList",(function(e){var t=[];e.users.forEach((function(e){e.room===n&&t.push(e.username)})),i([].concat(t))}))}),[]),Object(j.jsxs)("div",{class:"process",children:[Object(j.jsx)("h1",{children:"Players"}),a.map((function(e){return Object(j.jsx)("h2",{children:e})}))]})},h=(n(271),n(48));var m=function(e){var t=e.socket,n=Object(o.useState)(""),c=Object(s.a)(n,2),r=c[0],a=c[1],i=Object(o.useState)(""),u=Object(s.a)(i,2),l=u[0],b=u[1],m=Object(o.useState)(""),d=Object(s.a)(m,2),O=d[0],f=d[1],x=Object(o.useState)(""),p=Object(s.a)(x,2),v=p[0],g=p[1],S=function(){""!==r&&""!==l?t.emit("joinRoom",{username:r,roomname:l}):(alert("username and roomname are must !"),window.location.reload())};function y(){return Object(j.jsxs)("div",{children:[Object(j.jsxs)("p",{children:["You are in room ",l]}),Object(j.jsx)("p",{children:"Share this room number with your friends !"}),Object(j.jsx)("div",{children:Object(j.jsx)(h.b,{to:"/chat/".concat(l,"/").concat(r),children:Object(j.jsx)("button",{onClick:S,children:"Join Room"})})})]})}return Object(j.jsxs)("div",{className:"homepage",children:[Object(j.jsx)("h1",{children:"Skribbl Skribbl"}),Object(j.jsx)("input",{placeholder:"Input your user name",value:r,onChange:function(e){return a(e.target.value)}}),O||v?null:Object(j.jsx)("button",{onClick:function(){g(!0);var e=Math.floor(1e5*Math.random());b(e.toString())},children:"Create a new room"}),O||v?null:Object(j.jsx)("button",{onClick:function(){f(!0)},children:"Join a existing room"}),O?Object(j.jsxs)("div",{children:[Object(j.jsx)("input",{type:"text",placeholder:"Input the room name",value:l,onChange:function(e){return b(e.target.value)}}),Object(j.jsx)(h.b,{to:"/chat/".concat(l,"/").concat(r),children:Object(j.jsx)("button",{onClick:S,children:"Join"})})]}):null,v?Object(j.jsx)(y,{}):null]})},d=n(5),O=(n(273),n(156)),f=n.n(O).a.connect("/");function x(e){return Object(j.jsxs)(i.a.Fragment,{children:[Object(j.jsx)("div",{className:"right",children:Object(j.jsx)(b,{socket:f,roomname:e.match.params.roomname})}),Object(j.jsx)("div",{className:"right",children:Object(j.jsx)(l,{username:e.match.params.username,roomname:e.match.params.roomname,socket:f})})]})}var p=function(){return Object(j.jsx)(h.a,{children:Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(d.c,{children:[Object(j.jsx)(d.a,{path:"/",exact:!0,children:Object(j.jsx)(m,{socket:f})}),Object(j.jsx)(d.a,{path:"/chat/:roomname/:username",component:x})]})})})},v=n(158),g=n(59),S=Object(g.a)({ProcessReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"PROCESS"===t.type?Object(v.a)({},t.payload):e}}),y=S,k=n(56),C=n.n(k),N=Object(g.b)(y);C.a.render(Object(j.jsx)(u.a,{store:N,children:Object(j.jsx)(p,{})}),document.getElementById("root"))}},[[299,1,2]]]);
//# sourceMappingURL=main.530c66c3.chunk.js.map