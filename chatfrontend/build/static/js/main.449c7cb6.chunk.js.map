{"version":3,"sources":["aes.js","chat/chat.js","store/action/index.js","process/process.js","home/home.js","App.js","store/reducer/index.js","store/reducer/process.js","index.js"],"names":["aes256","require","secret_key","Chat","username","socket","roomname","useState","text","setText","messages","setMessages","dispatch","useDispatch","useEffect","on","data","encrypt","msg","cipher","ans","startsWith","decrypt","to_Decrypt","cypher","type","payload","process","console","log","temp","push","userId","sendData","to_Encrypt","emit","messagesEndRef","useRef","current","scrollIntoView","behavior","className","map","i","ref","placeholder","value","onChange","e","target","onKeyPress","key","onClick","Process","userlist","setUserList","users","forEach","room","class","Homepage","setusername","setroomname","modalisshown","setmodalstate","roomisshown","setroomstate","alert","window","location","reload","Roomdetails","to","rand_room","Math","floor","random","toString","io","connect","Appmain","props","start","setstart","Fragment","match","params","App","path","exact","component","rootReducers","combineReducers","ProcessReducer","state","action","store","createStore","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.449c7cb6.chunk.js","sourcesContent":["var aes256 = require(\"aes256\");\n//the secret key used for encrypting and decrypting messages\nvar secret_key = \"uI2ooxtwHeI6q69PS98fx9SWVGbpQohO\";\n//returns the encrypted text\nexport const to_Encrypt = (text) => {\n  var encrypted = aes256.encrypt(secret_key, text);\n  return encrypted;\n};\n//welcome message is not decrypted\nexport const to_Decrypt = (cipher, username) => {\n  if (cipher.startsWith(\"Welcome\")) {\n    return cipher;\n  }\n\n  if (cipher.startsWith(username)) {\n    return cipher;\n  }\n  //decryped message is returned\n  var decrypted = aes256.decrypt(secret_key, cipher);\n  return decrypted;\n};\n","import \"./chat.scss\";\nimport { to_Decrypt, to_Encrypt } from \"../aes.js\";\nimport { process } from \"../store/action/index\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { useDispatch } from \"react-redux\";\n//gets the data from the action object and reducers defined earlier\nfunction Chat({ username, roomname, socket }) {\n  const [text, setText] = useState(\"\");\n  const [messages, setMessages] = useState([]);\n\n  const dispatch = useDispatch();\n  \n  const dispatchProcess = (encrypt, msg, cipher) => {\n    dispatch(process(encrypt, msg, cipher));\n  };\n\n  useEffect(() => {\n    socket.on(\"message\", (data) => {\n      //decypt the message\n      const ans = to_Decrypt(data.text, data.username);\n      dispatchProcess(false, ans, data.text);\n      console.log(ans);\n      let temp = messages;\n      temp.push({\n        userId: data.userId,\n        username: data.username,\n        text: ans,\n      });\n      setMessages([...temp]);\n    });\n  }, [socket]);\n\n  const sendData = () => {\n    if (text !== \"\") {\n      //encrypt the message here\n      const ans = to_Encrypt(text);\n      socket.emit(\"chat\", ans);\n      setText(\"\");\n    }\n  };\n  const messagesEndRef = useRef(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(scrollToBottom, [messages]);\n\n  console.log(messages, \"mess\");\n\n  return (\n    <div className=\"chat\">\n      <div className=\"user-name\">\n      <ceter>\n        <h2>\n            Skribbl Skribbl\n        </h2>\n      </ceter>\n      </div>\n      <div className=\"chat-message\">\n        {messages.map((i) => {\n          if (i.username === username) {\n            return (\n              <div className=\"message mess-right\">\n                <p>{i.text}</p>\n                <span>{i.username}</span>\n              </div>\n            );\n          } else {\n            return (\n              <div className=\"message\">\n                <p>{i.text} </p>\n                <span>{i.username}</span>\n              </div>\n            );\n          }\n        })}\n        <div ref={messagesEndRef} />\n      </div>\n      <div className=\"send\">\n        <input\n          placeholder=\"Type your answer here\"\n          value={text}\n          onChange={(e) => setText(e.target.value)}\n          onKeyPress={(e) => {\n            if (e.key === \"Enter\") {\n              sendData();\n            }\n          }}\n        ></input>\n        <button onClick={sendData}>Send</button>\n      </div>\n    </div>\n  );\n}\nexport default Chat;\n","export const process = (encrypt, text, cypher) => {\n  return {\n    type: \"PROCESS\",\n    payload: {\n      encrypt,\n      text,\n      cypher,\n    },\n  };\n};","import \"./process.scss\";\nimport { useState, useEffect } from \"react\";\nfunction Process({ socket, roomname }) {\n  const [userlist, setUserList] = useState([]);\n  useEffect(()=>{\n    socket.emit(\"updateusers\")\n    socket.on(\"userList\",(data)=>{\n      var temp = [];\n      data.users.forEach(names);\n      function names(value){\n        if(value.room === roomname){\n          temp.push(value.username)\n        }\n      }\n      setUserList([...temp])\n    })\n  },[])\n  return (\n    <div class=\"process\">\n      <h1>Players</h1>\n      {userlist.map((i) => {\n          return(\n            <h2>{i}</h2>\n          );\n        })}\n    </div>\n  );\n}\nexport default Process;\n","import React, { useState } from \"react\";\nimport \"./home.scss\";\nimport { Link } from \"react-router-dom\";\n\nfunction Homepage({ socket }) {\n  const [username, setusername] = useState(\"\");\n  const [roomname, setroomname] = useState(\"\");\n  const [modalisshown, setmodalstate] = useState(\"\");\n  const [roomisshown, setroomstate] = useState(\"\");\n  //activates joinRoom function defined on the backend\n  const sendData = () => {\n    if (username !== \"\" && roomname !== \"\") {\n      socket.emit(\"joinRoom\", { username, roomname });\n      //if empty error message pops up and returns to the same page\n    } else {\n      alert(\"username and roomname are must !\");\n      window.location.reload();\n    }\n  };\n  function Join_Room(){\n    setmodalstate(true);\n  }\n  function Create_Room(){\n    setroomstate(true);\n    var rand_room = Math.floor(Math.random()*100000);\n    setroomname(rand_room.toString());\n  }\n  function Roomdetails(){\n    return(\n      <div>\n        <p>You are in room {roomname}</p>\n        <p>Share this room number with your friends !</p>\n        <br></br>\n        <br></br>\n        <br></br>\n        <div>\n          <center>\n            <Link to={`/chat/${roomname}/${username}`}>\n              <button class=\"button\" onClick={sendData}>Join Room</button>\n            </Link>\n          </center>\n        </div>\n      </div>\n    );\n  }\n  return (\n    <div className=\"homepage\">\n      <h1>Skribbl Skribbl</h1>\n      <input\n        placeholder=\"Input your user name\"\n        value={username}\n        onChange={(e) => setusername(e.target.value)}\n      ></input>\n      {modalisshown || roomisshown ? null : <button class=\"button\" onClick={Create_Room}>Create a new room</button>}\n      {modalisshown || roomisshown ? null : <button class=\"button\" onClick={Join_Room}>Join a existing room</button>}\n      {modalisshown ? \n        <div>\n          <center>\n            <input\n              type = \"text\"\n              placeholder=\"Input the room name\"\n              value={roomname}\n              onChange={(e) => setroomname(e.target.value)}\n            ></input>\n            <br></br>\n            <br></br>\n            <Link to={`/chat/${roomname}/${username}`}>\n              <button class=\"button\" onClick={sendData}>Join</button>\n            </Link>\n          </center>\n        </div> \n      : null}\n    {roomisshown ? <Roomdetails /> : null}\n  </div>\n  );\n}\n\nexport default Homepage;\n","import Chat from \"./chat/chat\";\nimport Process from \"./process/process\";\nimport Home from \"./home/home\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport \"./App.scss\";\nimport React from \"react\";\nimport { useState } from \"react\";\nimport io from \"socket.io-client\";\n\nconst socket = io.connect('/');\n\nfunction Appmain(props) {\n  const [start, setstart] = useState(false);\n  function startgame(){\n    setstart(true);\n  }\n  return (\n    <React.Fragment>      \n      <div className=\"right\">\n        <Process \n          socket={socket} \n          roomname={props.match.params.roomname}\n        />\n      </div>\n        <div className=\"left\">\n          {start ? <div><Chat username={props.match.params.username} roomname={props.match.params.roomname} socket={socket}/></div> : <button class=\"startgame\" onClick={startgame}>Start Game</button>}\n        </div>\n      \n    </React.Fragment>\n  );\n}\n\nfunction App() {\n  return (\n    <Router>\n      <div className=\"App\">\n        <Switch>\n          <Route path=\"/\" exact>\n            <Home socket={socket} />\n          </Route>\n          <Route path=\"/chat/:roomname/:username\" component={Appmain} />\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;","// import the reducers\nimport { ProcessReducer } from \"./process\";\nimport { combineReducers } from \"redux\";\n// define the object and call the action\nconst rootReducers = combineReducers({\n  ProcessReducer: ProcessReducer,\n});\n// else return default root reducer\nexport default rootReducers;","//initialiaze the function with two arguments\nexport const ProcessReducer = (state = {}, action) => {\n  switch (action.type) {\n    //returns updated state\n    case \"PROCESS\":\n      return { ...action.payload };\n    //else the current state is retained\n    default:\n      return state;\n  }\n};","import App from \"./App\";\nimport rootReducers from \"./store/reducer/index\";\nimport ReactDOM from \"react-dom\";\nimport { createStore } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport React from \"react\";\n\n//here we create an object to store the current state of the application\nconst store = createStore(rootReducers);\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);"],"sourceRoot":""}