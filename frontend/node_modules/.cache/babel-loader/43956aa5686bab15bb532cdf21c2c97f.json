{"ast":null,"code":"var _jsxFileName = \"/home/nsr/new2/skribbl-/chatfrontend/src/game/timer/timer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Timer = ({\n  timelimit,\n  socket,\n  user,\n  drawer\n}) => {\n  _s();\n\n  const [seconds, setSeconds] = useState(0);\n  const [isActive, setIsActive] = useState(false);\n  /*function toggle() {\n    setIsActive(!isActive);\n  }*/\n\n  function reset() {\n    setSeconds(0);\n    setIsActive(false);\n  }\n\n  socket.on(\"time_change\", data => {\n    setSeconds(data.seconds);\n  });\n  socket.on(\"Start_Timer\", () => {\n    reset();\n    setIsActive(true);\n  });\n  socket.on(\"Reset_Timer\", () => {\n    reset();\n  });\n  /*  useEffect(() => {    \n      let interval = null;\n      if (isActive) {\n        if(seconds<timelimit){\n          interval = setInterval(() => {\n            setSeconds(seconds => seconds + 1);\n          }, 1000);\n        }\n      } else if (!isActive && seconds !== 0) {\n        clearInterval(interval);\n      }\n      return () => clearInterval(interval);\n    }, [isActive, seconds, timelimit]);*/\n\n  useEffect(() => {\n    let interval = null;\n\n    if (seconds < timelimit && isActive) {\n      interval = setInterval(() => {\n        setSeconds(seconds => seconds + 1);\n      }, 1000);\n    } else if (seconds === timelimit && isActive) {\n      socket.emit(\"time_over\", user.room);\n      clearInterval(interval);\n    }\n\n    return () => clearInterval(interval);\n  }, [seconds, timelimit]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [timelimit - seconds, \"s\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 7\n  }, this);\n};\n\n_s(Timer, \"HjAIbd49zoP8n+oOlWwUpn38Z08=\");\n\n_c = Timer;\nexport default Timer;\n\nvar _c;\n\n$RefreshReg$(_c, \"Timer\");","map":{"version":3,"sources":["/home/nsr/new2/skribbl-/chatfrontend/src/game/timer/timer.js"],"names":["React","useState","useEffect","Timer","timelimit","socket","user","drawer","seconds","setSeconds","isActive","setIsActive","reset","on","data","interval","setInterval","emit","room","clearInterval"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;;;AAGA,MAAMC,KAAK,GAAG,CAAC;AAACC,EAAAA,SAAD;AAAWC,EAAAA,MAAX;AAAkBC,EAAAA,IAAlB;AAAuBC,EAAAA;AAAvB,CAAD,KAAoC;AAAA;;AAChD,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBR,QAAQ,CAAC,CAAD,CAAtC;AACA,QAAM,CAACS,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,CAAC,KAAD,CAAxC;AAEA;AACF;AACA;;AAEE,WAASW,KAAT,GAAiB;AACfH,IAAAA,UAAU,CAAC,CAAD,CAAV;AACAE,IAAAA,WAAW,CAAC,KAAD,CAAX;AACD;;AAEDN,EAAAA,MAAM,CAACQ,EAAP,CAAU,aAAV,EAAyBC,IAAD,IAAQ;AAC9BL,IAAAA,UAAU,CAACK,IAAI,CAACN,OAAN,CAAV;AACD,GAFD;AAKAH,EAAAA,MAAM,CAACQ,EAAP,CAAU,aAAV,EAAwB,MAAM;AAC5BD,IAAAA,KAAK;AACLD,IAAAA,WAAW,CAAC,IAAD,CAAX;AACD,GAHD;AAKDN,EAAAA,MAAM,CAACQ,EAAP,CAAU,aAAV,EAAwB,MAAK;AAC3BD,IAAAA,KAAK;AACN,GAFD;AAMD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEEV,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIa,QAAQ,GAAG,IAAf;;AACE,QAAGP,OAAO,GAACJ,SAAR,IAAqBM,QAAxB,EAAiC;AAC/BK,MAAAA,QAAQ,GAAGC,WAAW,CAAC,MAAM;AAC3BP,QAAAA,UAAU,CAACD,OAAO,IAAIA,OAAO,GAAG,CAAtB,CAAV;AACD,OAFqB,EAEnB,IAFmB,CAAtB;AAGD,KAJD,MAKK,IAAGA,OAAO,KAAKJ,SAAZ,IAAyBM,QAA5B,EAAqC;AACxCL,MAAAA,MAAM,CAACY,IAAP,CAAY,WAAZ,EAAwBX,IAAI,CAACY,IAA7B;AACAC,MAAAA,aAAa,CAACJ,QAAD,CAAb;AACD;;AACH,WAAO,MAAMI,aAAa,CAACJ,QAAD,CAA1B;AACD,GAZQ,EAYN,CAACP,OAAD,EAAUJ,SAAV,CAZM,CAAT;AAcA,sBACI;AAAA,2BACE;AAAA,iBACGA,SAAS,GAAGI,OADf;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADJ;AAOC,CAhEH;;GAAML,K;;KAAAA,K;AAkEN,eAAeA,KAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\n\nconst Timer = ({timelimit,socket,user,drawer}) => {\n  const [seconds, setSeconds] = useState(0);\n  const [isActive, setIsActive] = useState(false);\n\n  /*function toggle() {\n    setIsActive(!isActive);\n  }*/\n\n  function reset() {\n    setSeconds(0);\n    setIsActive(false);\n  }\n\n  socket.on(\"time_change\",(data)=>{\n    setSeconds(data.seconds)\n  });\n\n\n  socket.on(\"Start_Timer\",() => {\n    reset();\n    setIsActive(true);\n  })\n\n socket.on(\"Reset_Timer\",() =>{\n   reset();\n }) \n  \n\n  \n/*  useEffect(() => {    \n    let interval = null;\n    if (isActive) {\n      if(seconds<timelimit){\n        interval = setInterval(() => {\n          setSeconds(seconds => seconds + 1);\n        }, 1000);\n      }\n    } else if (!isActive && seconds !== 0) {\n      clearInterval(interval);\n    }\n    return () => clearInterval(interval);\n  }, [isActive, seconds, timelimit]);*/\n\n  useEffect(() => {    \n    let interval = null;\n      if(seconds<timelimit && isActive){\n        interval = setInterval(() => {\n          setSeconds(seconds => seconds + 1);\n        }, 1000);\n      }\n      else if(seconds === timelimit && isActive){\n        socket.emit(\"time_over\",user.room);\n        clearInterval(interval);\n      }\n    return () => clearInterval(interval);\n  }, [seconds, timelimit]);\n\n  return(\n      <div>\n        <div>\n          {timelimit - seconds}s\n        </div>\n      </div>\n    );\n  };\n\nexport default Timer;\n"]},"metadata":{},"sourceType":"module"}